language: node_js
node_js:
- '10'
cache: yarn
before_install:
- openssl aes-256-cbc -K $encrypted_a56df8d86925_key -iv $encrypted_a56df8d86925_iv
  -in ./.travis/keys/deploy.key.enc -out ./.travis/keys/deploy.key -d
- yarn global add greenkeeper-lockfile@1
- chmod +x ./.travis/hooks/deploy.sh
- chmod +x ./.travis/hooks/after-deploy.sh
before_script: greenkeeper-lockfile-update
script:
- yarn check --integrity
- yarn test
after_script: greenkeeper-lockfile-upload
after_success:
- ./.travis/hooks/deploy.sh
after_deploy:
- ./.travis/hooks/after-deploy.sh
branches:
  only:
  - master
  - "/^greenkeeper/.*$/"
